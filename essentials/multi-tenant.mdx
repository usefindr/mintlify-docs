---
title: "Multi-Tenant Support"
description: "Create completely isolated workspaces called tenants for secure, scalable B2B platforms that serve many organizations without cross-contamination of data."
---

Cortex provides a robust multi-tenant architecture with hierarchical tenant support, enabling you to build secure, scalable B2B platforms. Understanding the difference between `tenant_id` and `sub_tenant_id` is crucial for implementing proper data isolation and access control.

## Understanding Tenant Hierarchy

### Tenant ID (`tenant_id`) - Your Organization
The **tenant_id** is like your company's main identifier. It represents the primary organizational unit - typically your main enterprise client or organization. This is the top-level identifier that provides the broadest scope of data isolation.

**Think of it as**: The company name or organization ID that completely separates your data from all other organizations using Cortex.

### Sub-Tenant ID (`sub_tenant_id`) - Your Department/Team
The **sub_tenant_id** represents a subdivision within a tenant - such as departments, teams, or individual customers within an enterprise. This enables hierarchical data organization and more granular access control.

**Think of it as**: The department or team name within your company (like "Engineering", "Sales", or "HR").

### Default Sub-Tenant Behavior
**Important**: When you create a tenant, Cortex automatically creates a **DEFAULT sub-tenant** that acts as a global space for that tenant. 

- If you don't specify a `sub_tenant_id` when using any API, your data will be stored in this default sub-tenant
- This means if you upload documents with just a `tenant_id` and leave `sub_tenant_id` empty, they'll go to the default sub-tenant
- The default sub-tenant is perfect for organization-wide data that should be accessible across all departments

## Multi-Tenant Architecture

**What it is:**  
Cortex's multi-tenant system creates completely isolated workspaces at both the tenant and sub-tenant levels. All documents, search results, embeddings, and AI memories are isolated per tenant/sub-tenant combination, ensuring zero cross-contamination of data.

**Key Benefits:**
- **Complete Data Isolation**: Zero cross-contamination between tenants and sub-tenants
- **Scalable B2B Architecture**: Serve unlimited organizations and their subdivisions
- **Granular Access Control**: Control data access at organization and department levels
- **Performance Optimization**: Tenant-scoped searches for faster results
- **Compliance Ready**: Meet enterprise security and privacy requirements

## Real-World Use Cases

### 1. Enterprise SaaS Platform

**Scenario**: You're building an AI knowledge assistant for multiple enterprise clients.

```
Tenant: "acme_corp" (Acme Corporation)
├── Sub-tenant: "engineering" (Engineering Department)
├── Sub-tenant: "sales" (Sales Department)
├── Sub-tenant: "hr" (Human Resources)
└── Sub-tenant: "finance" (Finance Department)

Tenant: "tech_solutions" (Tech Solutions Inc.)
├── Sub-tenant: "product_dev" (Product Development)
├── Sub-tenant: "customer_success" (Customer Success)
└── Sub-tenant: "operations" (Operations)
```

**Implementation**:
- Each enterprise client gets their own `tenant_id`
- Each department within the enterprise gets their own `sub_tenant_id`
- Documents uploaded by Acme's Engineering team are only accessible to Acme Corporation (`tenant_id: "acme_corp"`) and specifically to the Engineering department (`sub_tenant_id: "engineering"`)

### 2. Consulting Firm with Multiple Clients

**Scenario**: A consulting firm serving multiple clients with project-based work.

```
Tenant: "consulting_firm" (Your Consulting Firm)
├── Sub-tenant: "client_alpha" (Client Alpha Project)
├── Sub-tenant: "client_beta" (Client Beta Project)
├── Sub-tenant: "client_gamma" (Client Gamma Project)
└── Sub-tenant: "internal" (Internal Operations)
```

**Implementation**:
- Your consulting firm is the main `tenant_id`
- Each client project gets its own `sub_tenant_id`
- Client Alpha's documents are completely isolated from Client Beta's data
- Internal firm knowledge can be kept separate from client work

### 3. Educational Platform

**Scenario**: An AI-powered learning platform serving multiple schools.

```
Tenant: "stanford_university" (Stanford University)
├── Sub-tenant: "computer_science" (CS Department)
├── Sub-tenant: "business_school" (Business School)
└── Sub-tenant: "medical_school" (Medical School)

Tenant: "mit" (MIT)
├── Sub-tenant: "engineering" (Engineering Department)
├── Sub-tenant: "sloan_school" (Sloan School of Management)
└── Sub-tenant: "media_lab" (Media Lab)
```

**Implementation**:
- Each university is a separate `tenant_id`
- Each department/school is a `sub_tenant_id`
- Research papers and course materials are isolated by institution and department

### 4. Multi-Brand E-commerce

**Scenario**: A company managing multiple brands with different customer bases.

```
Tenant: "fashion_group" (Fashion Group Corp)
├── Sub-tenant: "luxury_brand" (Luxury Brand)
├── Sub-tenant: "casual_brand" (Casual Brand)
└── Sub-tenant: "sports_brand" (Sports Brand)
```

**Implementation**:
- The parent company is the `tenant_id`
- Each brand is a `sub_tenant_id`
- Customer data, product catalogs, and support documents are brand-specific

## API Implementation

When making API calls, always include both identifiers:

```json
{
  "tenant_id": "acme_corp",
  "sub_tenant_id": "engineering",
  "query": "What are our coding standards?",
  // other parameters...
}
```

### Default Behavior
- If `sub_tenant_id` is not provided, it automatically uses the **DEFAULT sub-tenant** created when the tenant was set up
- This means the search/operation applies to the default sub-tenant scope (organization-wide data)
- For tenant-wide operations, you can omit `sub_tenant_id` and your data will be stored in the default sub-tenant
- The default sub-tenant acts as a global space where organization-wide documents and data are stored

## Security and Isolation

### Data Isolation Guarantees
- **Tenant Level**: No data can ever cross tenant boundaries
- **Sub-Tenant Level**: Data is isolated within sub-tenants unless explicitly queried at tenant level
- **Search Scope**: All searches are automatically scoped to the specified tenant/sub-tenant
- **Memory Isolation**: AI memories are completely isolated per tenant/sub-tenant combination

### Access Patterns
- **Tenant-Wide Access**: Use same value for both `tenant_id` and `sub_tenant_id`
- **Sub-Tenant Specific**: Use specific `sub_tenant_id` within a `tenant_id`
- **Cross Sub-Tenant**: Not supported - maintains strict isolation

This architecture ensures your platform can scale securely while maintaining the flexibility to organize data hierarchically within each client organization.
