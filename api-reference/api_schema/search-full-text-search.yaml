# Endpoint: /full-text-search
# Method: POST

"/full-text-search":
  post:
    description: Full text search endpoint for Cortex customers. Uses full text search with configurable operators for precise text matching.
    # --- Parameters (Headers) ---
    parameters:
    - name: Authorization
      in: header
      required: true
      description: Bearer token (your API key)
      schema:
        type: string
      example: Bearer {API_KEY}
    - name: Content-Type
      in: header
      required: true
      description: Request content type
      schema:
        type: string
        default: application/json
    - name: accept
      in: header
      required: true
      description: Response content type
      schema:
        type: string
        default: application/json
    # --- Request Body ---
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              query:
                type: string
                description: Search query string to find relevant content from indexed sources.
              tenant_id:
                type: string
                description: Primary organizational identifier (e.g., enterprise client, company) for multi-tenant data isolation.
              sub_tenant_id:
                type: string
                description: Secondary organizational identifier (e.g., department, team, project) within a tenant for hierarchical data organization; defaults to tenant_id if not provided.
                default: ""
              operator:
                type: string
                enum: ["or", "and"]
                default: "or"
                description: Search operator type. OR operator requires at least one token to be present, AND operator requires all tokens to be present.
              max_chunks:
                type: integer
                minimum: 1
                maximum: 1001
                description: Maximum number of content chunks to return from the search.
            required:
            - query
            - tenant_id
    # --- Responses ---
    responses:
      200:
        description: Successful full text search results
        content:
          application/json:
            schema:
              type: array
              items:
                type: object
                properties:
                  chunk_uuid:
                    type: string
                    description: Unique identifier for the content chunk
                    example: "CortexDoc37e854b429784b148d4fc910812bdc581753761779_20_v1"
                  source_id:
                    type: string
                    description: Identifier of the source document
                    example: "CortexDoc37e854b429784b148d4fc910812bdc581753761779"
                  source_title:
                    type: string
                    description: Title of the source document
                    example: "IEEE Transactions LaTeX Templates.pdf"
                  chunk_content:
                    type: string
                    description: The relevant content chunk
                    example: "JOURNAL OF LATEX CLASS FILES, VOL. 14, NO. 8, AUGUST 2015 12 Fig. 10: Comparison of models with 4bit precision on Medical QA dataset..."
                  source_url:
                    type: string
                    description: URL or path to the source document
                    example: "ToayuCogoBdxZVoZQ1ft8ZoRzCO2/Hello/Hello/local_source/CortexDoc37e854b429784b148d4fc910812bdc581753761779"
                  source_upload_time:
                    type: string
                    description: Timestamp when the source was uploaded
                    example: "1753761802.079415"
                  source_collection:
                    type: array
                    description: Collection tags associated with the source
                    items:
                      type: string
                    example: []
                  source_type:
                    type: string
                    description: Type of the source document
                    example: "file"
                  layout:
                    type: string
                    description: JSON string containing layout information for the chunk
                    example: '{"coordinates": {"x": 48.96399688720703, "y": 26.49277114868164, "width": 514.0717697143555, "height": 721.1119651794434}, "page": 12}'
                  version:
                    type: string
                    description: Version of the chunk
                    example: "v1"
                  source_last_updated_time:
                    type: string
                    description: Timestamp when the source was last updated
                    example: ""
                  relevancy_score:
                    type: number
                    format: float
                    description: Relevance score of the result
                    example: 0.8363813161849976
                  rerank_score:
                    type: number
                    format: float
                    nullable: true
                    description: Rerank score if available
                    example: null
      400:
        description: Bad request - invalid parameters (e.g., max_chunks out of range)
      401:
        description: Unauthorized - invalid API key
      500:
        description: Internal server error 