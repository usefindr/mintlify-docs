---
title: 'Add User Memory'
openapi: 'POST /user_memory/add_user_memory'
---

## Overview

The Add User Memory endpoint allows you to manually store personal memories for a specific user. These memories are used to enhance personalization and provide context-aware responses in your AI applications.

## What are User Memories?

User memories are personal, contextual information stored for individual users that help your AI system:
- Remember user preferences and past interactions
- Provide personalized responses based on user history
- Enhance user experience through adaptive behavior

## Functionality

- **Manual Memory Addition**: Allows you to explicitly add specific memories for a user
- **Vector Store Integration**: Stores memories in a searchable vector database for semantic retrieval
- **Tenant Isolation**: Ensures memories are properly isolated by tenant and sub-tenant
- **Automatic Provisioning**: If the tenant/sub-tenant combination doesn't exist for user memory, it will be automatically provisioned on first use

## Use Cases

- **Preference Storage**: Store user preferences like preferred communication style, timezone, or language
- **Context Preservation**: Remember important details from previous conversations
- **Personalization Data**: Store information that helps tailor responses to individual users

## Example Usage

### Basic Memory Addition

```bash
curl -X POST "https://api.cortex.com/user_memory/add_user_memory" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "tenant_id": "company_123",
    "sub_tenant_id": "marketing_team",
    "user_memory": "I prefer detailed technical explanations and works in the Pacific timezone"
  }'
```

### Response

```json
{
  "success": true,
  "user_memory_added": true
}
```

## Important Notes

<Warning>
**Automatic Tenant Provisioning**: If you receive an error stating "Tenant-id/sub-tenant-id combination either does not exist or is not provisioned for user memory", this means the tenant/sub-tenant combination hasn't been set up for user memory functionality yet. This will be automatically provisioned when you add or generate your first user memory for this combination.
</Warning>

<Note>
**Memory Persistence**: User memories are stored permanently until explicitly deleted. They persist across sessions and can be retrieved using the [Retrieve User Memory](/api-reference/endpoint/retrieve-user-memory) endpoint.
</Note>

<Info>
**Best Practices**: 
- Use clear, descriptive memory content that will be useful for future AI interactions
- Consider the context in which memories will be retrieved
- Avoid storing sensitive information unless necessary
- Use consistent formatting for similar types of memories
</Info>

## Error Responses

All endpoints return consistent error responses following the standard format. For detailed error information, see our [Error Responses](/api-reference/error-responses) documentation.

### Common Error Scenarios

**400 Bad Request**: Invalid input parameters or malformed requests
```json
{
  "detail": {
    "success": false,
    "message": "Invalid request parameters",
    "error_code": "INVALID_PARAMETERS"
  }
}
```

**401 Unauthorized**: Invalid or missing API key
```json
{
  "detail": {
    "success": false,
    "message": "Authentication required",
    "error_code": "UNAUTHORIZED"
  }
}
```

**403 Forbidden**: Valid authentication but insufficient permissions
```json
{
  "detail": {
    "success": false,
    "message": "Access denied",
    "error_code": "FORBIDDEN"
  }
}
```

**404 Not Found**: Requested resource does not exist
```json
{
  "detail": {
    "success": false,
    "message": "Resource not found",
    "error_code": "NOT_FOUND"
  }
}
```

**409 Conflict**: Resource already exists or conflicts with existing data
```json
{
  "detail": {
    "success": false,
    "message": "Resource already exists",
    "error_code": "CONFLICT"
  }
}
```

**422 Unprocessable Entity**: Request is well-formed but contains semantic errors
```json
{
  "detail": {
    "success": false,
    "message": "Validation failed",
    "error_code": "VALIDATION_ERROR"
  }
}
```

**500 Internal Server Error**: Unexpected server-side error
```json
{
  "detail": {
    "success": false,
    "message": "Internal server error",
    "error_code": "INTERNAL_ERROR"
  }
}
```

<Note>
**Error Handling**: Always check the `detail` object in error responses for the actual error information. The outer structure may vary, but the `detail` object always follows the standard format.
</Note>
