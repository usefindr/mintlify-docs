---
title: 'Create Tenant'
openapi: 'POST /user/create_tenant'
---

Create a new tenant. If you pass `tenant_id` as a query parameter, that ID will be used. If not provided, the service generates a new `tenant_id` and returns it.

<Note>
**Important**: When a tenant is created, Cortex automatically creates a **DEFAULT sub-tenant** that acts as a global space for that tenant. Any documents ingested or API calls made with the `tenant_id` but without specifying a `sub_tenant_id` will automatically reference this default sub-tenant.
</Note>

## Creating Additional Sub-Tenants

**No Separate API Required**: Cortex doesn't require a separate API call to create additional sub-tenants. Sub-tenants are created automatically when you first use a new `sub_tenant_id` that doesn't exist yet.

### How Sub-Tenant Creation Works

1. **Automatic Creation**: When you upload content with a `sub_tenant_id` that doesn't exist, Cortex automatically creates that sub-tenant
2. **First Upload Triggers Creation**: The first API call with a new `sub_tenant_id` will create the sub-tenant and then process your content
3. **Immediate Availability**: Once created, the sub-tenant is immediately available for all subsequent operations

### Sub-Tenant ID Best Practices

**For B2C Applications (Individual Users):**
```javascript
// Use user IDs as sub-tenant IDs for personal workspaces
sub_tenant_id: "user_12345"
sub_tenant_id: "user_67890"
```

**For B2B Applications (Departments/Teams):**
```javascript
// Use descriptive department or team names
sub_tenant_id: "engineering"
sub_tenant_id: "sales"
sub_tenant_id: "hr"
sub_tenant_id: "marketing"
```

**For Project-Based Organizations:**
```javascript
// Use project identifiers
sub_tenant_id: "project_alpha"
sub_tenant_id: "client_acme_corp"
```

<Info>
**Naming Convention**: Use consistent prefixes like `user_`, `dept_`, or `project_` to make the purpose of each sub-tenant clear. Avoid special characters and keep names descriptive but concise.
</Info>

### Query Parameters
- **tenant_id**: Optional string — If provided, will be used as the tenant identifier; otherwise a new one is generated.

### Body Parameters
- **tenant_metadata_schema**: Optional array of objects — Defines the **immutable** tenant-level metadata schema for your organization. Once set, these keys cannot be changed and will apply to all documents in this tenant.

<Warning>
**Important**: Tenant metadata keys are **immutable** once set during tenant creation. Choose your keys carefully as they cannot be modified later. Document metadata remains fully flexible and can be set per document during upload.
</Warning>

Each schema object should specify:
- **key**: The metadata field name (immutable once set)
- **type**: Data type (`text`, `number`, `boolean`, `date`)
- **searchable**: Whether this field can be used in search queries
- **filterable**: Whether this field can be used for filtering

**Example for Enterprise Setup:**
```json
[
  {"key": "department", "type": "text", "searchable": true, "filterable": true},
  {"key": "compliance_framework", "type": "text", "searchable": true, "filterable": true},
  {"key": "data_classification", "type": "text", "searchable": false, "filterable": true},
  {"key": "business_unit", "type": "text", "searchable": true, "filterable": true}
]
```

**Example for Simple Setup:**
```json
[
  {"key": "organization", "type": "text", "searchable": true, "filterable": true},
  {"key": "environment", "type": "text", "searchable": true, "filterable": true}
]
```


> **Note:**
> - The `tenant_metadata_schema` field in the request body is optional but recommended for enterprise setups. It defines immutable tenant-level metadata keys that will apply to all documents in this tenant.

## Sample Response

```json
{
  "status": "success",
  "message": "Tenant '99155#$@e2' created successfully.",
  "tenant_id": "B1SlKQ2j2l1aWYLa"
}
```

### Functionality
- Accepts an optional `tenant_id` via query
- Generates a new `tenant_id` if none is provided
- Creates and persists the tenant
- Returns the final `tenant_id` and a confirmation message

> Note: If your use case is to directly upload and search embeddings (without document/text ingestion), use the dedicated embeddings-tenant endpoint instead: `/embeddings/create_embeddings_tenant`. This sets `sub_tenant_id = tenant_id` and prepares the tenant for embeddings-first workloads.

## Error Responses

All endpoints return consistent error responses following the standard format. For detailed error information, see our [Error Responses](/api-reference/error-responses) documentation.

### Common Error Scenarios

**400 Bad Request**: Invalid input parameters or malformed requests
```json
{
  "detail": {
    "success": false,
    "message": "Invalid request parameters",
    "error_code": "INVALID_PARAMETERS"
  }
}
```

**401 Unauthorized**: Invalid or missing API key
```json
{
  "detail": {
    "success": false,
    "message": "Authentication required",
    "error_code": "UNAUTHORIZED"
  }
}
```

**403 Forbidden**: Valid authentication but insufficient permissions
```json
{
  "detail": {
    "success": false,
    "message": "Access denied",
    "error_code": "FORBIDDEN"
  }
}
```

**404 Not Found**: Requested resource does not exist
```json
{
  "detail": {
    "success": false,
    "message": "Resource not found",
    "error_code": "NOT_FOUND"
  }
}
```

**409 Conflict**: Tenant already exists (when a provided `tenant_id` is already in use)
```json
{
  "detail": {
    "success": false,
    "message": "Tenant already exists",
    "error_code": "TENANT_ALREADY_EXISTS"
  }
}
```

**422 Unprocessable Entity**: Request is well-formed but contains semantic errors
```json
{
  "detail": {
    "success": false,
    "message": "Validation failed",
    "error_code": "VALIDATION_ERROR"
  }
}
```

**500 Internal Server Error**: Unexpected server-side error
```json
{
  "detail": {
    "success": false,
    "message": "Internal server error",
    "error_code": "INTERNAL_ERROR"
  }
}
```

<Note>
**Error Handling**: Always check the `detail` object in error responses for the actual error information. The outer structure may vary, but the `detail` object always follows the standard format.
</Note>
