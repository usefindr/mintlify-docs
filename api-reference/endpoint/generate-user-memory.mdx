---
title: 'Generate User Memory'
openapi: 'POST /user_memory/generate_user_memory'
---

## Overview

The Generate User Memory endpoint is the most sophisticated user memory endpoint that automatically creates and stores multiple user memories based on a user query. It combines AI-powered query processing, intelligent memory generation, and automatic storage to build a comprehensive memory network for each user.

## What Makes This API Special?

This API goes beyond simple memory storage by:
- **AI-Powered Analysis**: Uses advanced AI to analyze user queries and extract meaningful insights
- **Multiple Memory Generation**: Creates several related memories from a single query
- **Automatic Storage**: Stores all generated memories without requiring separate API calls
- **Memory Network Building**: Creates interconnected memories that form a "second brain" for the user
- **Contextual Understanding**: Generates memories that are contextually relevant and useful for future interactions

## Functionality

- **Intelligent Query Processing**: Analyzes user queries to understand intent and extract key information
- **Multi-Memory Generation**: Creates multiple related memories from a single input
- **Automatic Vector Storage**: Stores all generated memories in the vector database for semantic retrieval
- **User Context Integration**: Incorporates user name and context for personalized memory generation
- **Tenant Isolation**: Ensures all generated memories are properly isolated by tenant and sub-tenant
- **Automatic Provisioning**: Provisions tenant/sub-tenant for user memory if not already set up

## Use Cases

- **Conversation Analysis**: Generate memories from user conversations or chat logs
- **Document Processing**: Extract key insights from user-uploaded documents
- **Meeting Notes**: Convert meeting transcripts into structured user memories
- **Feedback Processing**: Transform user feedback into actionable memory insights
- **Learning Path Creation**: Generate memories that help track user learning progress

## Example Usage

### Basic Memory Generation

```bash
curl -X POST "https://api.cortex.com/user_memory/generate_user_memory" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "tenant_id": "company_123",
    "sub_tenant_id": "engineering_team",
    "user_query": "I just finished working on the authentication system. I prefer using JWT tokens over session-based auth because they're stateless and work better with our microservices architecture. I also learned that implementing rate limiting is crucial for security.",
    "user_name": "John Smith"
  }'
```

### Response

```json
{
  "success": true,
  "generated_user_memories": [
    "User prefers JWT tokens over session-based authentication for microservices",
    "User has experience with authentication system implementation",
    "User understands the importance of rate limiting for security",
    "User works with microservices architecture",
    "User values stateless authentication approaches"
  ]
}
```

### Advanced Usage: Meeting Notes Processing

```bash
curl -X POST "https://api.cortex.com/user_memory/generate_user_memory" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "tenant_id": "company_123",
    "sub_tenant_id": "product_team",
    "user_query": "In today's product meeting, Sarah mentioned she's concerned about user onboarding complexity. She suggested we implement a guided tutorial and reduce the number of required fields in the signup form. The team agreed to prioritize this for the next sprint.",
    "user_name": "Sarah Johnson"
  }'
```

## Important Notes

<Warning>
**Automatic Tenant Provisioning**: If you receive an error stating "Tenant-id/sub-tenant-id combination either does not exist or is not provisioned for user memory", this means the tenant/sub-tenant combination hasn't been set up for user memory functionality yet. This will be automatically provisioned when you generate your first user memory for this combination.
</Warning>

<Note>
**Memory Quality**: The quality of generated memories depends on the clarity and detail of the input query. Provide rich, contextual information for best results.
</Note>

<Info>
**Best Practices**:
- Use detailed, contextual queries for better memory generation
- Include relevant background information in your queries
- Consider breaking complex topics into multiple focused queries
- Review generated memories to ensure they capture the intended insights
- Use this endpoint for processing longer text inputs like documents or conversations
</Info>

<Tip>
**Pro Tip**: This endpoint is particularly powerful when processing user feedback, meeting notes, or any text that contains multiple insights about a user's preferences, experiences, or context.
</Tip>


## Error Responses

All endpoints return consistent error responses following the standard format. For detailed error information, see our [Error Responses](/api-reference/error-responses) documentation.

### Common Error Scenarios

**400 Bad Request**: Invalid input parameters or malformed requests
```json
{
  "detail": {
    "success": false,
    "message": "Invalid request parameters",
    "error_code": "INVALID_PARAMETERS"
  }
}
```

**401 Unauthorized**: Invalid or missing API key
```json
{
  "detail": {
    "success": false,
    "message": "Authentication required",
    "error_code": "UNAUTHORIZED"
  }
}
```

**403 Forbidden**: Valid authentication but insufficient permissions
```json
{
  "detail": {
    "success": false,
    "message": "Access denied",
    "error_code": "FORBIDDEN"
  }
}
```

**404 Not Found**: Requested resource does not exist
```json
{
  "detail": {
    "success": false,
    "message": "Resource not found",
    "error_code": "NOT_FOUND"
  }
}
```

**409 Conflict**: Resource already exists or conflicts with existing data
```json
{
  "detail": {
    "success": false,
    "message": "Resource already exists",
    "error_code": "CONFLICT"
  }
}
```

**422 Unprocessable Entity**: Request is well-formed but contains semantic errors
```json
{
  "detail": {
    "success": false,
    "message": "Validation failed",
    "error_code": "VALIDATION_ERROR"
  }
}
```

**500 Internal Server Error**: Unexpected server-side error
```json
{
  "detail": {
    "success": false,
    "message": "Internal server error",
    "error_code": "INTERNAL_ERROR"
  }
}
```

<Note>
**Error Handling**: Always check the `detail` object in error responses for the actual error information. The outer structure may vary, but the `detail` object always follows the standard format.
</Note>
